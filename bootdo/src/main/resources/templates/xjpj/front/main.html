<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="xjpj/front/include_front::header">
</head>
<body>

	<nav th:include="xjpj/front/include_front::nav"
		class="navbar navbar-default navbar-custom navbar-fixed-top"></nav>
	<header class="intro-header"
		style="background-image: url('/img/logo.png')">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
					<div class="site-heading"></div>
				</div>
			</div>
		</div>
	</header>

	<!-- Main Content -->
	<div class="container">
		<div class="row">
			<div class="col-lg-10 col-lg-offset-1 col-md-12">
				<div class="notice-title">公告：</div>
				<div class="notice notice-content">
					<ul id="ul_notice">
					</ul>
				</div>
				<div class="pull-right" style="margin-top:-25px;position:relative;z-index:9999;"><a target='_blank' href="/blog/open/categories/notice">更多>></a></div>
			</div>
		</div>
		<div class="row text-center">
			<h3 id="tblTitle"></h3>
		</div>
		<div class="row">
			<div class="col-lg-10 col-lg-offset-1 col-md-12">
				<table id="exampleTable">
					<thead>
						<tr>
							<th data-formatter="xhFormatter" rowspan="2" data-valign="middle"
								data-align="center">序号</th>
							<th data-field="deptId" rowspan="2" data-valign="middle"
								data-align="center" data-visible="false">单位ID</th>
							<th data-field="deptName" rowspan="2" data-valign="middle"
								data-align="center" data-formatter="dwFormatter">单位</th>
							<th data-field="pdzgrs" rowspan="2" data-valign="middle"
								data-align="center">参与职工人数</th>
							<th colspan="2" data-valign="middle" data-align="center">三星级<img src="/img/star.jpg" height="24" width="26" /><img src="/img/star.jpg" height="24" width="26" /><img src="/img/star.jpg" height="24" width="26" /></th>
							<th colspan="2" data-valign="middle" data-align="center">二星级<img src="/img/star.jpg" height="24" width="26" /><img src="/img/star.jpg" height="24" width="26" /></th>
							<th colspan="2" data-valign="middle" data-align="center">一星级<img src="/img/star.jpg" height="24" width="26" /></th>
						</tr>
						<tr>
							<th data-field="sxrs" data-align="center" data-formatter="sxrsFormatter"
							style="border-left:1 solid black">人数</th>
							<th data-field="sxbl" data-align="center"
								data-formatter="blFormatter">比例</th>

							<th data-field="exrs" data-align="center" data-formatter="exrsFormatter">人数</th>
							<th data-field="exbl" data-align="center"
								data-formatter="blFormatter">比例</th>

							<th data-field="yxrs" data-align="center" data-formatter="yxrsFormatter">人数</th>
							<th data-field="yxbl" data-align="center"
								data-formatter="blFormatter">比例</th>

						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
</body>
<div th:include="xjpj/front/include_front::footer"></div>

<script type="text/javascript">
	var limit = 10;
	var currentPage = 0;
	var total;
	$(function() {
		load();
		$.ajax({
			// get请求地址
			url : "/blog/list/notice",
			dataType : "json",
			success : function(data) {
				var optArr = [];
				for (var i = 0; i < data.length; i++) {
					$('#ul_notice').append(
							"<li><a target='_blank' href='/blog/open/post/"+ data[i].cid +"'>" + data[i].title + "</a></li>");
				}

			}
		});
		setInterval("noticeUp('.notice ul','-35px',500)", 2000);
	});

	function load() {
		$('#exampleTable').bootstrapTable({
			method : 'get', // 服务器数据的请求方式 get or post
			url : '/xjpj/statistics/pdqktj', // 服务器数据的加载地址
			striped : false, // 设置为true会有隔行变色效果
			dataType : "json", // 服务器返回的数据类型
			pagination : false, // 设置为true会在底部显示分页条
			onLoadSuccess:function(data){
				var title = '';
				if(data != null && data.length>0){
					var year = data[0].khzq.substring(0,4);
					var month = data[0].khzq.substring(4,6);
					title +=year+'年'+month+'月份集团公司“星级职工”评定基本情况统计表';
					
				}
				$('#tblTitle').append(title);
				
			}
			
		});
	}

	function dwFormatter(value, row, index) {
		var a = "<a href='/front/search?deptId="+row.deptId+"&deptName="+value+"'>"+value+"</a>";
		return a;
	}
	
	function sxrsFormatter(value, row, index) {
		var a = "<a href='/front/search?deptId="+row.deptId+"&deptName="+row.deptName
				+"&xingJi="+3
				+"'>"
				+value+"</a>";
		return a;
	}
	function exrsFormatter(value, row, index) {
		var a = "<a href='/front/search?deptId="+row.deptId+"&deptName="+row.deptName
				+"&xingJi="+2
				+"'>"
				+value+"</a>";
		return a;
	}
	function yxrsFormatter(value, row, index) {
		var a = "<a href='/front/search?deptId="+row.deptId+"&deptName="+row.deptName
				+"&xingJi="+1
				+"'>"
				+value+"</a>";
		return a;
	}
	function xhFormatter(value, row, index) {
		return index + 1;
	}

	function blFormatter(value, row, index) {
		var bl = parseFloat(value).toFixed(2);
		return bl * 100 + "%";
	}

	/*
	 * 参数说明
	 * obj : 动画的节点，本例中是ul
	 * top : 动画的高度，本例中是-35px;注意向上滚动是负数
	 * time : 动画的速度，即完成动画所用时间，本例中是500毫秒，即marginTop从0到-35px耗时500毫秒
	 * function : 回调函数，每次动画完成，marginTop归零，并把此时第一条信息添加到列表最后;
	 * 
	 */
	function noticeUp(obj, top, time) {
		$(obj).animate({
			marginTop : top
		}, time, function() {
			$(this).css({
				marginTop : "0"
			}).find(":first").appendTo(this);
		})
	}

	function noticeLeft(obj, left, time) {
		$(obj).animate({
			marginLeft : left
		}, time, function() {
			$(this).css({
				marginLeft : "0"
			}).find(":first").appendTo(this);
		})
	}
</script>


</html>
